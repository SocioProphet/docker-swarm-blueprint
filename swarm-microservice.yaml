tosca_definitions_version: cloudify_dsl_1_3

imports:
  - http://www.getcloudify.org/spec/cloudify/3.4/types.yaml
  - plugins/cloudify-swarm-plugin/plugin.yaml

node_templates:

  master:
    type: cloudify.swarm.Manager
    properties:
      ip: 185.98.151.109

  service:
    type: cloudify.swarm.Microservice
    properties:
      name: testservice
    relationships:
      - type: cloudify.swarm.relationships.microservice_contained_in_manager
        target: master
      - type: cloudify.swarm.relationships.container_contained_in_microservice
        target: container
      - type: cloudify.swarm.relationships.port_attached_to_microservice
        target: port

  container:
    type: cloudify.swarm.Container
    properties:
      image: test:test

  port:
    type: cloudify.swarm.Port
    properties:
      published_port: 80
      target_port: 80


